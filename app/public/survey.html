<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
  <meta charset="utf-8">
  <title>Answer Some Questions</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
  <!-- <link rel="stylesheet" href="/css/reset.css"> -->
  <link rel="stylesheet" href="/css/master.css">
</head>

<body>

  <div class="modal" id="resultModal">
    <div class="modal-content">
      <span class="close" id='btnClose'>&times;</span>
      <p>Your match is...</p>
      <h2 id='matchName'></h2>
      <img src="#" id='matchImg' alt="match image">
    </div>
  </div>

  <form class="form" action="index.html" method="post">
    <label for="nameField">What is your name?</label>
    <input id="nameField" type="text" />
    <radiogroup id='q1'>
      <h4>How do you feel about water?</h4>
      <input type="radio" name="q1" value=1 />
      <label for="q1">Hate it</label>
      <br>
      <input type="radio" name="q1" value=2 />
      <label for="q1">Not the best swimmer</label>
      <br>
      <input type="radio" name="q1" value=3 />
      <label for="q1">Meh</label>
      <br>
      <input type="radio" name="q1" value=4 />
      <label for="q1">Water's cool</label>
      <br>
      <input type="radio" name="q1" value=5 />
      <label for="q1">Water is LIFE</label>
    </radiogroup>
    <radiogroup id='q2'>
      <h4>What about fire?</h4>
      <input type="radio" name="q2" value=1 />
      <label for="q2">Hate it</label>
      <br>
      <input type="radio" name="q2" value=2 />
      <label for="q2">Too Hot</label>
      <br>
      <input type="radio" name="q2" value=3 />
      <label for="q2">Meh</label>
      <br>
      <input type="radio" name="q2" value=4 />
      <label for="q2">It keeps me warm</label>
      <br>
      <input type="radio" name="q2" value=5 />
      <label for="q2">Fire RULES ALL</label>
    </radiogroup>
    <radiogroup id='q3'>
      <h4>Earth?</h4>
      <input type="radio" name="q3" value=1 />
      <label for="q3">Hate it</label>
      <br>
      <input type="radio" name="q3" value=2 />
      <label for="q3">Too dirty</label>
      <br>
      <input type="radio" name="q3" value=3 />
      <label for="q3">Meh</label>
      <br>
      <input type="radio" name="q3" value=4 />
      <label for="q3">How else would we eat?</label>
      <br>
      <input type="radio" name="q3" value=5 />
      <label for="q3">Just try to take my land from me.</label>
    </radiogroup>
    <radiogroup id='q4'>
      <h4>and Air?</h4>
      <input type="radio" name="q4" value=1 />
      <label for="q4">If I didn't have to breathe, I wouldn't.</label>
      <br>
      <input type="radio" name="q4" value=2 />
      <label for="q4">I don't like the way Appa smells.</label>
      <br>
      <input type="radio" name="q4" value=3 />
      <label for="q4">Meh</label>
      <br>
      <input type="radio" name="q4" value=4 />
      <label for="q4">Flowers smell nice.</label>
      <br>
      <input type="radio" name="q4" value=5 />
      <label for="q4">I love flying!</label>
    </radiogroup>
    <radiogroup id='q5'>
      <h4>Do you enjoy travel?</h4>
      <input type="radio" name="q5" value=1 />
      <label for="q5">I'm fine where I am thanks.</label>
      <br>
      <input type="radio" name="q5" value=2 />
      <label for="q5">Only while I'm complaining endlessly. And there better be good food where we're going.</label>
      <br>
      <input type="radio" name="q5" value=3 />
      <label for="q5">If I have to, I will.</label>
      <br>
      <input type="radio" name="q5" value=4 />
      <label for="q5">I'm up for a trip.</label>
      <br>
      <input type="radio" name="q5" value=5 />
      <label for="q5">I can't stay in the same place for more than a week.</label>
    </radiogroup>
    <radiogroup id='q6'>
      <h4>What's the best part about being a Bender?</h4>
      <input type="radio" name="q6" value=1 />
      <label for="q6">Being one with nature.</label>
      <br>
      <input type="radio" name="q6" value=2 />
      <label for="q6">Having a cultural identity.</label>
      <br>
      <input type="radio" name="q6" value=3 />
      <label for="q6">Sharing my gift with others.</label>
      <br>
      <input type="radio" name="q6" value=4 />
      <label for="q6">All the fun stuff I can do.</label>
      <br>
      <input type="radio" name="q6" value=5 />
      <label for="q6">The ability to dominate others.</label>
    </radiogroup>
    <radiogroup id='q7'>
      <h4>Someone says something mildly agressive toward you. What do you do?</h4>
      <input type="radio" name="q7" value=1 />
      <label for="q7">Run away</label>
      <br>
      <input type="radio" name="q7" value=2 />
      <label for="q7">Talk them down</label>
      <br>
      <input type="radio" name="q7" value=3 />
      <label for="q7">Try to see things from their perspective</label>
      <br>
      <input type="radio" name="q7" value=4 />
      <label for="q7">Teach them a lesson</label>
      <br>
      <input type="radio" name="q7" value=5 />
      <label for="q7">KILL THEM</label>
    </radiogroup>
    <radiogroup id='q8'>
      <h4>Would you participate in an underground fighting ring?</h4>
      <input type="radio" name="q8" value=1 />
      <label for="q8">Illegal stuff? No way.</label>
      <br>
      <input type="radio" name="q8" value=2 />
      <label for="q8">ehh...not my scene</label>
      <br>
      <input type="radio" name="q8" value=3 />
      <label for="q8">I'll go watch, but wouldn't fight</label>
      <br>
      <input type="radio" name="q8" value=4 />
      <label for="q8">That sounds like it could be fun</label>
      <br>
      <input type="radio" name="q8" value=5 />
      <label for="q8">Just point me to my opponent</label>
    </radiogroup>
    <radiogroup id='q9'>
      <h4>Finish this sentence. "It's a long long way..."</h4>
      <input type="radio" name="q9" value=1 />
      <label for="q9">to Ba Sing Se.</label>
      <br>
      <input type="radio" name="q9" value=2 />
      <label for="q9">home</label>
      <br>
      <input type="radio" name="q9" value=3 />
      <label for="q9">but I'll be there by day</label>
      <br>
      <input type="radio" name="q9" value=4 />
      <label for="q9">so don't tell me there's no hay</label>
      <br>
      <input type="radio" name="q9" value=5 />
      <label for="q9">ugh, why are we singing!?</label>
    </radiogroup>
    <radiogroup id='q10'>
      <h4>Your worst enemy comes to you. They're saying they've had a change of heart, and they want to help you. What do you do?</h4>
      <input type="radio" name="q10" value=1 />
      <label for="q10">kill them</label>
      <br>
      <input type="radio" name="q10" value=2 />
      <label for="q10">don't believe them, and make them go away.</label>
      <br>
      <input type="radio" name="q10" value=3 />
      <label for="q10">tie them up until your friends decide they're telling the truth.</label>
      <br>
      <input type="radio" name="q10" value=4 />
      <label for="q10">Tell them you believe them. Then exploit them for personal gain.</label>
      <br>
      <input type="radio" name="q10" value=5 />
      <label for="q10">Forgive them and become friends.</label>
    </radiogroup>

    <p><button type="submit" class="submit">So who is it?</button></p>
  </form>
</body>

</html>

<script type="text/javascript">
  $('.submit').on('click', event => {
    event.preventDefault();
    let q1 = parseInt($('input[name=q1]:checked').val());
    let q2 = parseInt($('input[name=q2]:checked').val());
    let q3 = parseInt($('input[name=q3]:checked').val());
    let q4 = parseInt($('input[name=q4]:checked').val());
    let q5 = parseInt($('input[name=q5]:checked').val());
    let q6 = parseInt($('input[name=q6]:checked').val());
    let q7 = parseInt($('input[name=q7]:checked').val());
    let q8 = parseInt($('input[name=q8]:checked').val());
    let q9 = parseInt($('input[name=q9]:checked').val());
    let q10 = parseInt($('input[name=q10]:checked').val());

    let answers = [q1, q2, q3, q4, q5, q6, q7, q8, q9, q10]



    let newFriend = {
      name: $('#nameField').val().trim(),
      scores: answers
    }

    // $('#nameField').val("");
    // $('input:checked').prop('checked',false);

    $.post('/api/friends', newFriend, result => {
      $('#matchName').text(result.name);
      $('#matchImg').attr('src', result.photo);
      $('#resultModal').attr('style', 'display: block');
    });
  });

  $('#btnClose').on("click", event => {
    event.preventDefault();
    $('#resultModal').attr('style', 'display: none');
  });

</script>
